(()=>{"use strict";var e={834:(e,t,o)=>{o.r(t),o.d(t,{Project:()=>c});const c=e=>{let t=e.name||"",o=e.id||"",c=e.table||{};const a=()=>{let e=Math.floor(Math.random()*Math.floor(255));for(;t=e,c.hasOwnProperty(t);)e=Math.floor(Math.random()*Math.floor(255));var t;return e};return{setName:e=>{t=e},setID:e=>{o=e},getName:()=>t,getID:()=>o,addTask:e=>{const t=a();e.setID(t),(e=>{c[e.getID()]=e})(e)},removeTask:e=>{(e=>{c[e]&&delete c[e]})(e)},createID:a,getTasks:()=>c,updateDetails:e=>{if(e.id){const t=c[e.id];t.setDetails(e.details),t.setDate(e.date)}},getTasksforStorage:()=>{let e={};for(let t in c)e[`task-${c[t].getID()}`]={};for(let t in c){const o=c[t].getID(),a=c[t].getTitle(),n=c[t].getDate(),s=c[t].getDetails();e[`task-${o}`]={id:o,title:a,date:n,details:s}}return e}}}}},t={};function o(c){if(t[c])return t[c].exports;var a=t[c]={exports:{}};return e[c](a,a.exports,o),a.exports}o.d=(e,t)=>{for(var c in t)o.o(t,c)&&!o.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:t[c]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=o(834);const t=e=>{let t=e.title||"",o=e.details||"",c=e.id||0,a=e.date||"";return{setTitle:e=>{t=e},setDetails:e=>{o=e},setID:e=>{c=e},setDate:e=>{a=e},getTitle:()=>t,getDetails:()=>o,getID:()=>c,getDate:()=>a}},c=(()=>{let e=[];return{addProject:t=>{const o=Math.floor(Math.random()*Math.floor(1048));t.setID(o),e.push(t)},removeProject:t=>{e=e.filter((e=>e!=t))},getProjects:()=>e,getProject:t=>e.filter((e=>e.getID()==t))[0],projectCount:()=>e.length}})(),a=e=>{let t=[];return{addHandler:e=>{t.push(e)},removeHandler:e=>{const o=t.indexOf(e);t.splice(o,1)},fire:e=>{t.forEach((t=>{t(e)}))},myName:e||""}},n=(()=>{let e=[];const t=t=>e.filter((e=>e.myName==t))[0];return{publish:(o,c)=>{let n=t(o);n||(n=a(o),console.log(o),e.push(n)),n.fire(c)},subscribe:(o,c)=>{let n=t(o);n||(n=a(o),e.push(n)),n.addHandler(c)}}})(),{Project:s}=o(834),r=e=>{const t=l(e.projectInfo),o=d(e.tasks);return Object.assign({},{projectInfo:t},{tasks:o})},d=e=>e?JSON.parse(e):"",l=e=>e?JSON.parse(e):"",i=(e,o)=>{const c=o.tasks;console.log("projectInfo ",o),e.setName(o.projectInfo.name),e.setID(o.projectInfo.id);for(let o in c){const a=c[o].id||0,n=c[o].title||"default",s=c[o].date||"",r=c[o].details||"",d=t({id:a,title:n,date:s,details:r});e.addTask(d)}return e};if((()=>{const e=e=>{const o=document.querySelector("#ul-sidebar-projects"),c="material-icons icon",a=document.createElement("div"),n=document.createElement("li"),s=document.createElement("div"),r=document.createElement("button"),d=document.createElement("i"),l=document.createElement("i");a.className="flex-content f-column",n.className="sidebar-project-list_item  solid-top-border",s.className="flex-content project-edit",r.className="center-list-item",d.className=c,l.className=c,n.setAttribute("id",`project-${e.id}`),r.setAttribute("id",`p-button-${e.id}`),d.setAttribute("id",`p-check-${e.id}`),l.setAttribute("id",`p-create-${e.id}`),l.disabled=!1,r.textContent=e.name,d.textContent="check_circle_outline",l.textContent="create";const i=(e=>{const t=document.createElement("div"),o=document.createElement("input"),c=e.id||2048,a=e.name||"default";return t.className="flex-content project-edit collapsible-hidden",o.className="center-list-item ",t.setAttribute("id",`p-collapsible-${c}`),o.setAttribute("id",`p-input-${c}`),o.value=a,t.append(o),t})({name:e.name,id:e.id});s.append(d,r,l),a.append(s,i),n.append(a),o.append(n),t.initEvents(e.id)};n.subscribe("addProjectToView",(t=>{e(t)}));const t=(()=>{(()=>{const e=document.querySelector("#new-project-input"),t=document.querySelector("#new-project-button");e.addEventListener("keyup",(e=>{t.disabled=!e.target.value})),t.addEventListener("click",(t=>{if(!t.target.disabled){const t=e.value;n.publish("createNewProject",{name:t})}}))})();return{initEvents:e=>{console.log("initEvents",e),(e=>{document.querySelector(`#p-input-${e}`).addEventListener("keyup",(t=>((e,t)=>{const o=document.querySelector(`#p-create-${t}`);if(o.disabled=!e.target.value,!o.disabled){const o=e.target.value,c=t;n.publish("updateProjectName",{name:o,projectID:c})}})(t,e)))})(e),(e=>{document.querySelector(`#p-create-${e}`).addEventListener("click",(t=>((e,t)=>{if(!e.target.disabled){const e=document.querySelector(`#p-collapsible-${t}`),o=document.querySelector(`#p-input-${t}`);e.className="flex-content project-edit collapsible-hidden"===e.className?"flex-content project-edit":"flex-content project-edit collapsible-hidden",o.className="center-list-item"===o.className?"center-list-item":"center-list-item center-list-item-enabled"}})(t,e)))})(e),(e=>{document.querySelector(`#p-check-${e}`).addEventListener("click",(t=>{const o=document.querySelector("#ul-sidebar-projects"),c=`project-${e}`;let a=o.childNodes;Array.from(a).forEach((t=>{t.id==c&&(o.removeChild(t),n.publish("removedProjectFromView",{id:e}))}))}))})(e),(e=>{document.querySelector(`#p-button-${e}`).addEventListener("click",(t=>((e,t)=>{console.log("project selected view: ",t),console.log("is disabled: ",e),e||n.publish("projectSelectedView",{id:t})})(t.target.disabled,e)))})(e)}}})()})(),(()=>{const e=document.querySelector("#display-todos"),t="material-icons",o=e=>{const t=e.details||"",o=`todo-item-text ${e.element}-details`,c=document.createElement("div"),a=document.createElement(e.element);return c.setAttribute("id",`details-${e.element}-${e.id}`),a.setAttribute("id",`${e.element}-${e.id}`),"textarea"===e.element&&a.setAttribute("maxlength",120),c.className="flex-content todo-details collapsible-hidden",a.className=o,a.textContent=t,c.append(a),n.subscribe("detailsUpdated",(e=>{a.textContent=e.details})),c},c=()=>{const e=e=>"flex-content todo-details collapsible-hidden"==e?"flex-content todo-details":"flex-content todo-details collapsible-hidden",o=o=>{const c=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(12),a=document.querySelector(`#details-p-${c}`);a.className=e(a.className)};return{initEvents:(c,a)=>{const s=c||"",r=a||"";(e=>{document.querySelector(`#expand_more-${e}`).addEventListener("click",o)})(s),((e,t)=>{document.querySelector(`#button-${e}`).addEventListener("click",(o=>((e,t)=>{const o=`grid-${e}`,c=document.querySelector("#display-todos");let a=c.childNodes;Array.from(a).forEach((e=>{if(e.id==o){c.removeChild(e);const o=e.id.slice(5),a=t;n.publish("removedTaskFromView",{id:o,projectID:a})}}))})(e,t)))})(s,r),((o,c)=>{document.querySelector(`#create-${o}`).addEventListener("click",(o=>((o,c)=>{const a=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(7),s=`#create-${a}`,r="#details-textarea-"+a,d=`#textarea-${a}`,l=`#dateInput-${a}`,i=document.querySelector(s),u=document.querySelector(r),m=document.querySelector(d),p=document.querySelector(l);if(m.addEventListener("keydown",(e=>{i.disabled=!e.target.value})),m.value&&"flex-content todo-details"===u.className){const e=c;n.publish("updateDetails",{id:a,details:m.value,date:p.value,projetID:e})}p.disabled=!p.disabled,u.className=e(u.className)})(o,c)))})(s,r)}}};n.subscribe("addTasktoView",(a=>(a=>{const n=document.createElement("div"),s=document.createElement("div");n.setAttribute("id",`grid-${a.id}`),s.setAttribute("id",a.id),n.className="grid grid-todos",s.className="flex-content todo-item",s.append(((e,o)=>{const c=e||"",a=document.createElement("div"),n=document.createElement("button"),s=document.createElement("i"),r=document.createElement("span");return a.className="flex-content",n.className="check-button-todo",s.className=t,r.className="todo-item-text",r.innerText=c,s.innerText="check_circle_outline",n.setAttribute("id",`button-${o}`),s.setAttribute("id",`check-mark-${o}`),n.append(s),a.append(n,r),a})(a.title,a.id),((e,t)=>{const o=document.createElement("div"),c=document.createElement("input"),a=`dateInput-${e}`;return c.className="solid-bottom-border new-task-todo-input",c.setAttribute("id",a),c.setAttribute("value",t),c.setAttribute("type","date"),c.disabled=!0,o.append(c),o})(a.id,a.date),(e=>{const o=document.createElement("div");return o.className="flex-content todo-item-options",["expand_more","create"].forEach((c=>{const a=document.createElement("button"),n=document.createElement("i");a.id=`${c}-${e}`,a.className=c+" icon-button todo-item-button todo-item-option",n.className=t,n.textContent=c,a.append(n),o.append(a)})),o})(a.id)),n.append(s,o({element:"p",id:a.id,details:a.details}),o({element:"textarea",id:a.id,details:a.details})),e.append(n);const r=c(),d=a.id,l=a.projectID;r.initEvents(d,l)})(a))),n.subscribe("addMultipleTaskstoView",(e=>{console.log(e);const t=e.tasks||{},o=e.projectID;for(let e in t){const c=t[e].getTitle(),a=t[e].getID(),s=t[e].getDate(),r=t[e].getDetails();n.publish("addTasktoView",{title:c,id:a,date:s,details:r,projectID:o})}}))})(),(()=>{let e;c.projectCount()&&(e=c.getProjects()[0].getID()||""),(()=>{const t=(e,t)=>{document.querySelector(t).disabled=e},o=e=>{document.querySelector(e.input).addEventListener("keydown",(o=>{(e=>{let o=(e=>!!document.querySelector(e).value)(e.input);t(!o,e.button)})(e)}))};o({input:"#new-task-input",button:"#new-task-todo-button"}),document.querySelector("#new-task-todo-button").addEventListener("click",(e=>{document.querySelector(".modal").style.display="block"})),(()=>{const c=()=>document.querySelector("#modal-text-input").value,a=()=>{document.querySelector(".modal").style.display="none",document.querySelector("#modal-text-input").value="",document.querySelector("#new-task-input").value="",document.querySelector("#new-task-date").value="",document.querySelector("#character-count").textContent="120",t(!0,"#new-task-todo-button")};o({input:"#modal-text-input",button:"#confirm-modal"}),document.querySelector("#modal-text-input").addEventListener("keydown",(e=>{(()=>{const e=document.querySelector("#character-count"),t=120-c().length;e.textContent=t,e.style.color=t<=0?"var(--menuGold)":"var(--ultrav)"})()})),document.querySelector("#confirm-modal").addEventListener("click",(t=>(()=>{const t=document.querySelector("#new-task-input").value,o=c(),s=document.querySelector("#new-task-date").value,r=e;a(),console.log("createNewTask pid: ",r),n.publish("createTask",{title:t,details:o,date:s,projectID:r})})())),document.querySelector("#close-modal").addEventListener("click",(e=>{a()}))})()})(),n.subscribe("projectSelected",(t=>{e=t.id})),n.subscribe("projectSelected",(t=>{e=t.projectID;const o=t.tasks||{},c=t.projectID||"";(()=>{const e=document.querySelector("#display-todos");for(console.log("clear task display",e);e.firstChild;)e.removeChild(e.firstChild)})();for(let e in o){const t=o[e].getTitle(),a=o[e].getDetails(),s=o[e].getID();n.publish("addTasktoView",{title:t,details:a,id:s,projectID:c})}}))})(),(()=>{let t=localStorage.getItem("controllerSerial");t=JSON.parse(t);for(let o in t){const a=JSON.parse(t[o]),n=r(a),s=i((0,e.Project)({}),n);c.addProject(s)}})(),n.subscribe("saveProject",(e=>{(e=>{const t=JSON.stringify((e=>{let t=e.getProjects(),o={};return t.forEach((e=>{const t=e.getID();o[t]={}})),t.forEach((e=>{const t=(e=>{const t=e.getTasksforStorage();return JSON.stringify(t)})(e),c=(e=>{const t={name:e.getName(),id:e.getID()};return JSON.stringify(t)})(e),a=e.getID();o[a]=JSON.stringify({projectInfo:c,tasks:t})})),o})(e))||"";localStorage.setItem("controllerSerial",t)})(c)})),n.subscribe("createNewProject",(t=>{const o=t.name||"default",a=(0,e.Project)({name:o});c.addProject(a);const s=a.getID();console.log("new project id",s),n.publish("addProjectToView",{name:o,id:s}),n.publish("projectSelected",{projectID:s})})),n.subscribe("updateProjectName",(e=>{const t=e.id||"";if(t){const o=c.getProject(t);if(o){const t=e.name||"default";o.setName(t)}}})),n.subscribe("projectSelectedView",(e=>{const t=e.id||"";if(t){const e=c.getProject(t).getTasks(),o=t;n.publish("projectSelected",{tasks:e,projectID:o})}})),n.subscribe("createTask",(e=>{const o=t(e),c=e.projectID||"";n.publish("addTask",{task:o,projectID:c})})),n.subscribe("updateDetails",(e=>{const t=e.projectID,o=c.getProject(t),a=e.details,s=e.date,r=e.id;o.updateDetails({id:r,details:a,date:s}),n.publish("detailsUpdated",{details:a,date:s,projectID:t})})),n.subscribe("addTask",(e=>{const t=e.task,o=e.projectID,a=c.getProject(o);console.log("project: ",a),console.log("project id: ",o),a.addTask(t);const s=t.getTitle(),r=t.getDetails(),d=t.getID(),l=t.getDate();n.publish("saveProject",{}),n.publish("addTasktoView",{title:s,details:r,id:d,date:l,projectID:o})})),n.subscribe("removedTaskFromView",(e=>{const t=e.id||"",o=e.projectID||"";c(o).removeTask(t),n.publish("saveProject",{})})),c.projectCount()){const e=c.getProjects()[0],t=c.getProjects();console.log(e),console.log("projects",c.getProjects());const o=e.getTasks(),a=e.getID();n.publish("addMultipleTaskstoView",{tasks:o,projectID:a});for(let e in t){const o=t[e].getID(),c=t[e].getName();n.publish("addProjectToView",{name:c,id:o})}}})()})();