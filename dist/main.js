(()=>{"use strict";var e={834:(e,t,a)=>{a.r(t),a.d(t,{Project:()=>o});const o=e=>{let t=e.name||"",a=e.id||"",o=e.table||{};const s=e=>!o.hasOwnProperty(e),d=()=>{let e=Math.floor(Math.random()*Math.floor(255));for(;!s(e);)e=Math.floor(Math.random()*Math.floor(255));return e};return{setName:e=>{t=e},setID:e=>{a=e},getName:()=>t,getID:()=>a,addTask:e=>{const t=d();e.setID(t),(e=>{o[e.getID()]=e})(e)},removeTask:e=>{(e=>{s(e)&&delete o[e]})(e)},createID:d,getTasks:()=>o,updateDetails:e=>{if(e.id){const t=o[e.id];t.setDetails(e.details),t.setDate(e.date)}},getTasksforStorage:()=>{let e={};for(let t in o)e[`task-${o[t].getID()}`]={};for(let t in o){const a=o[t].getID(),s=o[t].getTitle(),d=o[t].getDate(),n=o[t].getDetails();e[`task-${a}`]={id:a,title:s,date:d,details:n}}return e}}}}},t={};function a(o){if(t[o])return t[o].exports;var s=t[o]={exports:{}};return e[o](s,s.exports,a),s.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=a(834);const t=e=>{let t=e.title||"",a=e.details||"",o=e.id||0,s=e.date||"";return{setTitle:e=>{t=e},setDetails:e=>{a=e},setID:e=>{o=e},setDate:e=>{s=e},getTitle:()=>t,getDetails:()=>a,getID:()=>o,getDate:()=>s}},o=e=>{let t=[];return{addHandler:e=>{t.push(e)},removeHandler:e=>{const a=t.indexOf(e);t.splice(a,1)},fire:e=>{t.forEach((t=>{t(e)}))},myName:e||""}},s=(()=>{let e=[];const t=t=>e.filter((e=>e.myName==t))[0];return{publish:(a,s)=>{let d=t(a);d||(d=o(a),console.log(a),e.push(d)),d.fire(s)},subscribe:(a,s)=>{let d=t(a);d||(d=o(a),e.push(d)),d.addHandler(s)}}})(),{Project:d}=a(834),n=()=>{let e=localStorage.getItem("project");return e=JSON.parse(e),e};let r=(()=>{const e=(()=>{const e=n();return e?JSON.parse(e.tasks):""})()||"",t=(()=>{const e=n();return e?JSON.parse(e.projectInfo):""})()||"";return e&&t?Object.assign({},{tasks:e},t):""})();const l=(0,e.Project)({name:"name",id:0});r&&((e,a)=>{const o=a.tasks;e.setName(a.name),e.setID(a.id);for(let a in o){const s=o[a].id||0,d=o[a].title||"default",n=o[a].date||"",r=o[a].details||"",l=t({id:s,title:d,date:n,details:r});e.addTask(l)}})(l,r);const i=l.createID(),c=(0,e.Project)({name:"default",id:i}),u={id:c.getID(),name:c.getName()};(()=>{const e=e=>{const t=document.querySelector("#ul-sidebar-projects"),a=document.createElement("li");a.className="sidebar-project-list_item  solid-top-border",a.id=e.id;const o=document.createElement("p");o.className="center-list-item",o.innerText=e.name,a.append(o),t.append(a)};s.subscribe("projectAdded",(t=>{e(t.project)}));const t=()=>{document.querySelectorAll(".sidebar-project-list_item").forEach((e=>{e.addEventListener("click",(e=>{s.publish("projectSelected",{project:p.getTasks()})}))}))};s.subscribe("projectAdded",(e=>{t()}))})(),(()=>{const e=document.querySelector("#display-todos"),t="material-icons",a=e=>{const t=e.details||"",a=`todo-item-text ${e.element}-details`,o=document.createElement("div"),d=document.createElement(e.element);return o.setAttribute("id",`details-${e.element}-${e.id}`),d.setAttribute("id",`${e.element}-${e.id}`),"textarea"===e.element&&d.setAttribute("maxlength",120),o.className="flex-content todo-details collapsible-hidden",d.className=a,d.textContent=t,o.append(d),s.subscribe("detailsUpdated",(e=>{d.textContent=e.details})),o},o=()=>{const e=e=>"flex-content todo-details collapsible-hidden"==e?"flex-content todo-details":"flex-content todo-details collapsible-hidden",a=a=>{const o=(a.target.className===t?a.target.parentElement.id:a.target.id).slice(12),s=document.querySelector(`#details-p-${o}`);s.className=e(s.className)},o=a=>{const o=(a.target.className===t?a.target.parentElement.id:a.target.id).slice(7),d=`#create-${o}`,n="#details-textarea-"+o,r=`#textarea-${o}`,l=`#dateInput-${o}`,i=document.querySelector(d),c=document.querySelector(n),u=document.querySelector(r),m=document.querySelector(l);u.addEventListener("keydown",(e=>{i.disabled=!e.target.value})),u.value&&"flex-content todo-details"===c.className&&s.publish("updateDetails",{id:o,details:u.value,date:m.value}),m.disabled=!m.disabled,c.className=e(c.className)};return{initEvents:e=>{const t=e||"";(e=>{document.querySelector(`#expand_more-${e}`).addEventListener("click",a)})(t),(e=>{document.querySelector(`#button-${e}`).addEventListener("click",(t=>(e=>{const t=`grid-${e}`,a=document.querySelector("#display-todos");let o=a.childNodes;Array.from(o).forEach((e=>{if(e.id==t){a.removeChild(e);const t=e.id;s.publish("removedTaskFromView",{id:t})}}))})(e)))})(t),(e=>{document.querySelector(`#create-${e}`).addEventListener("click",o)})(t)}}};s.subscribe("addTasktoView",(s=>{(s=>{const d=document.createElement("div"),n=document.createElement("div");d.setAttribute("id",`grid-${s.id}`),n.setAttribute("id",s.id),d.className="grid grid-todos",n.className="flex-content todo-item",n.append(((e,a)=>{const o=e||"",s=document.createElement("div"),d=document.createElement("button"),n=document.createElement("i"),r=document.createElement("span");return s.className="flex-content",d.className="check-button-todo",n.className=t,r.className="todo-item-text",r.innerText=o,n.innerText="check_circle_outline",d.setAttribute("id",`button-${a}`),n.setAttribute("id",`check-mark-${a}`),d.append(n),s.append(d,r),s})(s.title,s.id),((e,t)=>{const a=document.createElement("div"),o=document.createElement("input"),s=`dateInput-${e}`;return o.className="solid-bottom-border new-task-todo-input",o.setAttribute("id",s),o.setAttribute("value",t),o.setAttribute("type","date"),o.disabled=!0,a.append(o),a})(s.id,s.date),(e=>{const a=document.createElement("div");return a.className="flex-content todo-item-options",["expand_more","create"].forEach((o=>{const s=document.createElement("button"),d=document.createElement("i");s.id=`${o}-${e}`,s.className=o+" icon-button todo-item-button todo-item-option",d.className=t,d.textContent=o,s.append(d),a.append(s)})),a})(s.id)),d.append(n,a({element:"p",id:s.id,details:s.details}),a({element:"textarea",id:s.id,details:s.details})),e.append(d),o().initEvents(s.id)})(s)})),s.subscribe("addMultipleTaskstoView",(e=>{const t=e.tasks||{};console.log(t);for(let e in t){const a=t[e].getTitle(),o=t[e].getID(),d=t[e].getDate(),n=t[e].getDetails();s.publish("addTasktoView",{title:a,id:o,date:d,details:n})}}))})(),(()=>{const e=(e,t)=>{document.querySelector(t).disabled=e},t=t=>{document.querySelector(t.input).addEventListener("keydown",(a=>{(t=>{let a=(e=>!!document.querySelector(e).value)(t.input);e(!a,t.button)})(t)}))};t({input:"#new-task-input",button:"#new-task-todo-button"}),document.querySelector("#new-task-todo-button").addEventListener("click",(e=>{document.querySelector(".modal").style.display="block"})),(()=>{const a=()=>document.querySelector("#modal-text-input").value,o=()=>{document.querySelector(".modal").style.display="none",document.querySelector("#modal-text-input").value="",document.querySelector("#new-task-input").value="",document.querySelector("#new-task-date").value="",document.querySelector("#character-count").textContent="120",e(!0,"#new-task-todo-button")};t({input:"#modal-text-input",button:"#confirm-modal"}),document.querySelector("#modal-text-input").addEventListener("keydown",(e=>{(()=>{const e=document.querySelector("#character-count"),t=120-a().length;e.textContent=t,e.style.color=t<=0?"var(--menuGold)":"var(--ultrav)"})()})),document.querySelector("#confirm-modal").addEventListener("click",(e=>(()=>{const e=document.querySelector("#new-task-input").value,t=a(),d=document.querySelector("#new-task-date").value;o(),s.publish("createTask",{title:e,details:t,date:d})})())),document.querySelector("#close-modal").addEventListener("click",(e=>{o()}))})()})(),s.subscribe("projectSelected",(e=>{const t=e.project;(()=>{const e=document.querySelector("#display-todos");for(;e.firstChild;)e.removeChild(e.firstChild)})();for(let e in t){const a=t[e].getTitle(),o=t[e].getDetails(),d=t[e].getID();s.publish("addTasktoView",{title:a,details:o,id:d})}})),r&&s.publish("addMultipleTaskstoView",{tasks:l.getTasks()}),s.subscribe("saveProject",(e=>{(e=>{const t=(e=>{const t=e.getTasksforStorage();return JSON.stringify(t)})(e),a=(e=>{const t={name:e.getName(),id:e.getID()};return JSON.stringify(t)})(e),o=JSON.stringify({projectInfo:a,tasks:t});localStorage.setItem("project",o)})(l)})),s.publish("projectAdded",{project:u}),s.subscribe("createTask",(e=>{const a=t(e);s.publish("addTask",{task:a})})),s.subscribe("updateDetails",(e=>{const t=l.getTasks(),a=e.details,o=e.date,d=t[e.id];d.setDetails(a),d.setDate(o),s.publish("detailsUpdated",{details:a,date:o})})),s.subscribe("addTask",(e=>{const t=e.task;l.addTask(t);const a=t.getTitle(),o=t.getDetails(),d=t.getID(),n=t.getDate();s.publish("saveProject",{}),s.publish("addTasktoView",{title:a,details:o,id:d,date:n})})),s.subscribe("removedTaskFromView",(e=>{const t=e.id||"";l.removeTask(t),s.publish("saveProject",{})}))})()})();