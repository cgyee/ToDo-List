(()=>{"use strict";var e={834:(e,t,o)=>{o.r(t),o.d(t,{Project:()=>c});const c=e=>{let t=e.name||"",o=e.id||"",c=e.table||{};const n=()=>{let e=Math.floor(Math.random()*Math.floor(255));for(;t=e,c.hasOwnProperty(t);)e=Math.floor(Math.random()*Math.floor(255));var t;return e};return{setName:e=>{t=e},setID:e=>{o=e},getName:()=>t,getID:()=>o,addTask:e=>{const t=n();e.setID(t),(e=>{c[e.getID()]=e})(e)},removeTask:e=>{(e=>{c[e]&&delete c[e]})(e)},createID:n,getTasks:()=>c,updateDetails:e=>{if(e.id){const t=c[e.id];t.setDetails(e.details),t.setDate(e.date)}},getTasksforStorage:()=>{let e={};for(let t in c)e[`task-${c[t].getID()}`]={};for(let t in c){const o=c[t].getID(),n=c[t].getTitle(),a=c[t].getDate(),r=c[t].getDetails();e[`task-${o}`]={id:o,title:n,date:a,details:r}}return e}}}}},t={};function o(c){if(t[c])return t[c].exports;var n=t[c]={exports:{}};return e[c](n,n.exports,o),n.exports}o.d=(e,t)=>{for(var c in t)o.o(t,c)&&!o.o(e,c)&&Object.defineProperty(e,c,{enumerable:!0,get:t[c]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=o(834);const t=(()=>{let e=[];return{addProject:t=>{const o=Math.floor(Math.random()*Math.floor(1048));t.setID(o),e.push(t)},removeProject:t=>{e=e.filter((e=>e!=t))},getProjects:()=>e,getProject:t=>e.filter((e=>e.getID()==t))[0],projectCount:()=>e.length}})(),c=e=>{let t=[];return{addHandler:e=>{t.push(e)},removeHandler:e=>{const o=t.indexOf(e);t.splice(o,1)},fire:e=>{t.forEach((t=>{t(e)}))},myName:e||""}},n=(()=>{let e=[];const t=t=>e.filter((e=>e.myName==t))[0];return{publish:(o,n)=>{let a=t(o);a||(a=c(o),console.log(o),e.push(a)),a.fire(n)},subscribe:(o,n)=>{let a=t(o);a||(a=c(o),e.push(a)),a.addHandler(n)}}})(),{Project:a}=o(834);(()=>{n.subscribe("addProjectToView",(t=>{(t=>{const o=document.querySelector("#ul-sidebar-projects"),c="material-icons icon",n=document.createElement("div"),a=document.createElement("li"),r=document.createElement("div"),s=document.createElement("button"),d=document.createElement("i"),l=document.createElement("i");n.className="flex-content f-column",a.className="sidebar-project-list_item  solid-top-border",r.className="flex-content project-edit",s.className="center-list-item",d.className=c,l.className=c,a.setAttribute("id",`project-${t.id}`),s.setAttribute("id",`p-button-${t.id}`),d.setAttribute("id",`p-check-${t.id}`),l.setAttribute("id",`p-create-${t.id}`),l.disabled=!1,s.textContent=t.name,d.textContent="check_circle_outline",l.textContent="create";const i=(e=>{const t=document.createElement("div"),o=document.createElement("input"),c=e.id||2048,n=e.name||"default";return t.className="flex-content project-edit collapsible-hidden",o.className="center-list-item ",t.setAttribute("id",`p-collapsible-${c}`),o.setAttribute("id",`p-input-${c}`),o.value=n,t.append(o),t})({name:t.name,id:t.id});r.append(d,s,l),n.append(r,i),a.append(n),o.append(a),e.initEvents(t.id)})(t)}));const e=(()=>{(()=>{const e=document.querySelector("#new-project-input"),t=document.querySelector("#new-project-button");e.addEventListener("keyup",(e=>{t.disabled=!e.target.value})),t.addEventListener("click",(t=>{if(!t.target.disabled){const t=e.value;n.publish("createNewProject",{name:t})}}))})();return{initEvents:e=>{console.log("initEvents",e),(e=>{document.querySelector(`#p-input-${e}`).addEventListener("keyup",(t=>((e,t)=>{const o=document.querySelector(`#p-create-${t}`);if(o.disabled=!e.target.value,!o.disabled){const o=e.target.value,c=t;n.publish("updateProjectName",{name:o,projectID:c})}})(t,e)))})(e),(e=>{document.querySelector(`#p-create-${e}`).addEventListener("click",(t=>((e,t)=>{if(!e.target.disabled){const e=document.querySelector(`#p-collapsible-${t}`),o=document.querySelector(`#p-input-${t}`);e.className="flex-content project-edit collapsible-hidden"===e.className?"flex-content project-edit":"flex-content project-edit collapsible-hidden",o.className="center-list-item"===o.className?"center-list-item":"center-list-item center-list-item-enabled"}})(t,e)))})(e),(e=>{document.querySelector(`#p-check-${e}`).addEventListener("click",(t=>{const o=document.querySelector("#ul-sidebar-projects"),c=`project-${e}`;let a=o.childNodes;Array.from(a).forEach((t=>{t.id==c&&(o.removeChild(t),n.publish("removedProjectFromView",{id:e}))}))}))})(e),(e=>{document.querySelector(`#p-button-${e}`).addEventListener("click",(t=>((e,t)=>{console.log("project selected view: ",t),console.log("is disabled: ",e),e||n.publish("projectSelectedView",{id:t})})(t.target.disabled,e)))})(e)}}})()})(),(()=>{const e=document.querySelector("#display-todos"),t="material-icons",o=e=>{const t=e.details||"",o=`todo-item-text ${e.element}-details`,c=document.createElement("div"),a=document.createElement(e.element);return c.setAttribute("id",`details-${e.element}-${e.id}`),a.setAttribute("id",`${e.element}-${e.id}`),"textarea"===e.element&&a.setAttribute("maxlength",120),c.className="flex-content todo-details collapsible-hidden",a.className=o,a.textContent=t,c.append(a),n.subscribe("detailsUpdated",(e=>{a.textContent=e.details})),c},c=()=>{const e=e=>"flex-content todo-details collapsible-hidden"==e?"flex-content todo-details":"flex-content todo-details collapsible-hidden",o=o=>{const c=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(12),n=document.querySelector(`#details-p-${c}`);n.className=e(n.className)};return{initEvents:(c,a)=>{const r=c||"",s=a||"";(e=>{document.querySelector(`#expand_more-${e}`).addEventListener("click",o)})(r),((e,t)=>{document.querySelector(`#button-${e}`).addEventListener("click",(o=>((e,t)=>{const o=`grid-${e}`,c=document.querySelector("#display-todos");let a=c.childNodes;Array.from(a).forEach((e=>{if(e.id==o){c.removeChild(e);const o=e.id.slice(5),a=t;n.publish("removedTaskFromView",{id:o,projectID:a})}}))})(e,t)))})(r,s),((o,c)=>{document.querySelector(`#create-${o}`).addEventListener("click",(o=>((o,c)=>{const a=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(7),r=`#create-${a}`,s="#details-textarea-"+a,d=`#textarea-${a}`,l=`#dateInput-${a}`,i=document.querySelector(r),u=document.querySelector(s),m=document.querySelector(d),p=document.querySelector(l);if(m.addEventListener("keydown",(e=>{i.disabled=!e.target.value})),m.value&&"flex-content todo-details"===u.className){const e=c;n.publish("updateDetails",{id:a,details:m.value,date:p.value,projetID:e})}p.disabled=!p.disabled,u.className=e(u.className)})(o,c)))})(r,s)}}};n.subscribe("addTasktoView",(n=>(n=>{const a=document.createElement("div"),r=document.createElement("div");a.setAttribute("id",`grid-${n.id}`),r.setAttribute("id",n.id),a.className="grid grid-todos",r.className="flex-content todo-item",r.append(((e,o)=>{const c=e||"",n=document.createElement("div"),a=document.createElement("button"),r=document.createElement("i"),s=document.createElement("span");return n.className="flex-content",a.className="check-button-todo",r.className=t,s.className="todo-item-text",s.innerText=c,r.innerText="check_circle_outline",a.setAttribute("id",`button-${o}`),r.setAttribute("id",`check-mark-${o}`),a.append(r),n.append(a,s),n})(n.title,n.id),((e,t)=>{const o=document.createElement("div"),c=document.createElement("input"),n=`dateInput-${e}`;return c.className="solid-bottom-border new-task-todo-input",c.setAttribute("id",n),c.setAttribute("value",t),c.setAttribute("type","date"),c.disabled=!0,o.append(c),o})(n.id,n.date),(e=>{const o=document.createElement("div");return o.className="flex-content todo-item-options",["expand_more","create"].forEach((c=>{const n=document.createElement("button"),a=document.createElement("i");n.id=`${c}-${e}`,n.className=c+" icon-button todo-item-button todo-item-option",a.className=t,a.textContent=c,n.append(a),o.append(n)})),o})(n.id)),a.append(r,o({element:"p",id:n.id,details:n.details}),o({element:"textarea",id:n.id,details:n.details})),e.append(a);const s=c(),d=n.id,l=n.projectID;s.initEvents(d,l)})(n))),n.subscribe("addMultipleTaskstoView",(e=>{const t=e.tasks||{};for(let e in t){const o=t[e].getTitle(),c=t[e].getID(),a=t[e].getDate(),r=t[e].getDetails();n.publish("addTasktoView",{title:o,id:c,date:a,details:r})}}))})(),(()=>{let e;t.projectCount()&&(e=t.getProjects()[0].getID()||""),(()=>{const o=(e,t)=>{document.querySelector(t).disabled=e},c=e=>{document.querySelector(e.input).addEventListener("keydown",(t=>{(e=>{let t=(e=>!!document.querySelector(e).value)(e.input);o(!t,e.button)})(e)}))};c({input:"#new-task-input",button:"#new-task-todo-button"}),document.querySelector("#new-task-todo-button").addEventListener("click",(e=>{document.querySelector(".modal").style.display="block"})),(()=>{const a=()=>document.querySelector("#modal-text-input").value,r=()=>{document.querySelector(".modal").style.display="none",document.querySelector("#modal-text-input").value="",document.querySelector("#new-task-input").value="",document.querySelector("#new-task-date").value="",document.querySelector("#character-count").textContent="120",o(!0,"#new-task-todo-button")};c({input:"#modal-text-input",button:"#confirm-modal"}),document.querySelector("#modal-text-input").addEventListener("keydown",(e=>{(()=>{const e=document.querySelector("#character-count"),t=120-a().length;e.textContent=t,e.style.color=t<=0?"var(--menuGold)":"var(--ultrav)"})()})),document.querySelector("#confirm-modal").addEventListener("click",(o=>(()=>{const o=document.querySelector("#new-task-input").value,c=a(),s=document.querySelector("#new-task-date").value,d=e||t.getProjects()[0].getID();r(),console.log("createNewTask pid: ",d),n.publish("createTask",{title:o,details:c,date:s,projectID:d})})())),document.querySelector("#close-modal").addEventListener("click",(e=>{r()}))})()})(),n.subscribe("projectSelected",(e=>{const t=e.tasks,o=e.projectID;(()=>{const e=document.querySelector("#display-todos");for(console.log("clear task display",e);e.firstChild;)e.removeChild(e.firstChild)})();for(let e in t){const c=t[e].getTitle(),a=t[e].getDetails(),r=t[e].getID();n.publish("addTasktoView",{title:c,details:a,id:r,projectID:o})}})),n.subscribe("projectSelected",(t=>{e=t.id}))})(),n.subscribe("saveProject",(e=>{(e=>{const t=JSON.stringify((e=>{let t=e.getProjects(),o={};return console.log(t),t.forEach((e=>{const t=e.getID();o[t]={}})),t.forEach((e=>{const t=(e=>{const t=e.getTasksforStorage();return JSON.stringify(t)})(e),c=(e=>{const t={name:e.getName(),id:e.getID()};return JSON.stringify(t)})(e),n=e.getID();o[n]=JSON.stringify({projectInfo:c,tasks:t})})),console.log(o),o})(e))||"";localStorage.setItem("controllerSerial",t)})(t)})),n.subscribe("createNewProject",(o=>{const c=o.name||"default",a=(0,e.Project)({name:c});t.addProject(a);const r=a.getID();console.log("new project id",r),n.publish("addProjectToView",{name:c,id:r})})),n.subscribe("updateProjectName",(e=>{const o=e.id||"";if(o){const c=t.getProject(o);if(c){const t=e.name||"default";c.setName(t)}}})),n.subscribe("projectSelectedView",(e=>{const o=e.id||"";if(o){const e=t.getProject(o).getTasks(),c=o;n.publish("projectSelected",{tasks:e,projectID:c})}})),n.subscribe("createTask",(e=>{const t=(e=>{let t=e.title||"",o=e.details||"",c=e.id||0,n=e.date||"";return{setTitle:e=>{t=e},setDetails:e=>{o=e},setID:e=>{c=e},setDate:e=>{n=e},getTitle:()=>t,getDetails:()=>o,getID:()=>c,getDate:()=>n}})(e),o=e.projectID||"";n.publish("addTask",{task:t,projectID:o})})),n.subscribe("updateDetails",(e=>{const o=e.projectID,c=t.getProject(o),a=e.details,r=e.date,s=e.id;c.updateDetails({id:s,details:a,date:r}),n.publish("detailsUpdated",{details:a,date:r,projectID:o})})),n.subscribe("addTask",(e=>{const o=e.task,c=e.projectID,a=t.getProject(c);console.log("project: ",a),console.log("project id: ",c),a.addTask(o);const r=o.getTitle(),s=o.getDetails(),d=o.getID(),l=o.getDate();n.publish("saveProject",{}),n.publish("addTasktoView",{title:r,details:s,id:d,date:l,projectID:c})})),n.subscribe("removedTaskFromView",(e=>{const o=e.id||"",c=e.projectID||"";t(c).removeTask(o),n.publish("saveProject",{})}))})()})();