(()=>{"use strict";var t={834:(e,t,o)=>{o.r(t),o.d(t,{Project:()=>a});const a=e=>{let t=e.name||"",o=e.id||"",a=e.table||{};const r=()=>{let e=Math.floor(Math.random()*Math.floor(255));for(;t=e,a.hasOwnProperty(t);)e=Math.floor(Math.random()*Math.floor(255));var t;return e};return{setName:e=>{t=e},setID:e=>{o=e},getName:()=>t,getID:()=>o,addTask:e=>{const t=r();e.setID(t),(e=>{a[e.getID()]=e})(e)},removeTask:e=>{(e=>{a[e]&&delete a[e]})(e)},createID:r,getTasks:()=>a,updateDetails:e=>{if(e.id){const t=a[e.id];t.setDetails(e.details),t.setDate(e.date)}},getTasksforStorage:()=>{let e={};for(let t in a)e[`task-${a[t].getID()}`]={};for(let t in a){const o=a[t].getID(),r=a[t].getTitle(),n=a[t].getDate(),c=a[t].getDetails();e[`task-${o}`]={id:o,title:r,date:n,details:c}}return e}}}}},o={};function a(e){if(o[e])return o[e].exports;var r=o[e]={exports:{}};return t[e](r,r.exports,a),r.exports}a.d=(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var t=a(834);const o=e=>{let t=e.title||"",o=e.details||"",a=e.id||0,r=e.date||"";return{setTitle:e=>{t=e},setDetails:e=>{o=e},setID:e=>{a=e},setDate:e=>{r=e},getTitle:()=>t,getDetails:()=>o,getID:()=>a,getDate:()=>r}},r=(()=>{let e=[];return{addProject:t=>{const o=Math.floor(Math.random()*Math.floor(1048));t.setID(o),e.push(t)},removeProject:t=>{e=e.filter((e=>e!=t))},getProjects:()=>e,getProject:t=>e.filter((e=>e.getID()==t))[0],projectCount:()=>e.length}})(),n=e=>{let t=[];return{addHandler:e=>{t.push(e)},removeHandler:e=>{const o=t.indexOf(e);t.splice(o,1)},fire:e=>{t.forEach((t=>{t(e)}))},myName:e||""}},c=(()=>{let e=[];const t=t=>e.filter((e=>e.myName==t))[0];return{publish:(o,a)=>{let r=t(o);r||(r=n(o),console.log(o),e.push(r)),r.fire(a)},subscribe:(o,a)=>{let r=t(o);r||(r=n(o),e.push(r)),r.addHandler(a)}}})(),{Project:s}=a(834),d=e=>{const t=l(e.projectInfo),o=i(e.tasks);return Object.assign({},t,o)},i=()=>{const e=d();return e?JSON.parse(e.tasks):""},l=()=>{const e=d();return e?JSON.parse(e.projectInfo):""},u=(e,t)=>{const a=t.tasks;e.setName(t.name),e.setID(t.id);for(let t in a){const r=a[t].id||0,n=a[t].title||"default",c=a[t].date||"",s=a[t].details||"",d=o({id:r,title:n,date:c,details:s});e.addTask(d)}return e};(()=>{c.subscribe("addProjectToView",(e=>{(e=>{const o=document.querySelector("#ul-sidebar-projects"),a="material-icons icon",r=document.createElement("li"),n=document.createElement("div"),c=document.createElement("input"),s=document.createElement("i"),d=document.createElement("i");r.className="sidebar-project-list_item  solid-top-border",n.className="flex-content project-edit",c.className="center-list-item",s.className=a,d.className=a,r.setAttribute("id",`project-${e.id}`),c.setAttribute("id",`p-input-${e.id}`),c.setAttribute("maxlength","16"),s.setAttribute("id",`p-check-${e.id}`),d.setAttribute("id",`p-create-${e.id}`),c.value=e.name,c.disabled=!0,s.textContent="check_circle_outline",d.textContent="create",n.append(s,c,d),r.append(n),o.append(r),t.initEvents(e.id)})(e)}));const t=(()=>{(()=>{const e=document.querySelector("#new-project-input"),t=document.querySelector("#new-project-button");e.addEventListener("keyup",(e=>{t.disabled=!e.target.value})),t.addEventListener("click",(t=>{if(!t.target.disabled){const t=e.value;console.log(t),c.publish("createNewProject",{name:t})}}))})();return{initEvents:t=>{console.log("initEvents",t),(e=>{document.querySelector(`#p-input-${e}`).addEventListener("keydown",(t=>((e,t)=>{const o=document.querySelector(`#p-create-${t}`);if(o.disabled=!e.target.value,!o.disabled){const o=e.target.value;c.publish("updateProjectName",{name:o,id:t})}})(t,e)))})(t),(e=>{document.querySelector(`#p-create-${e}`).addEventListener("click",(t=>(e=>{const t=document.querySelector(`#p-input-${e}`);t.disabled=!t.disabled,t.className=t.disabled?"center-list-item":"center-list-item center-list-item-enabled"})(e)))})(t),(e=>{document.querySelector(`#p-check-${e}`).addEventListener("click",(t=>{const o=document.querySelector("#ul-sidebar-projects"),a=`project-${e}`;let r=o.childNodes;Array.from(r).forEach((t=>{t.id==a&&(o.removeChild(t),console.log("found"),c.publish("removedProjectFromView",{id:e}))}))}))})(t),(t=>{document.querySelector(`#p-input-${t}`).addEventListener("click",((e,t)=>{console.log(t),e&&c.publish("projectSelectedView",{id:t})})(e.target.value,t))})(t)}}})()})(),(()=>{const e=document.querySelector("#display-todos"),t="material-icons",o=e=>{const t=e.details||"",o=`todo-item-text ${e.element}-details`,a=document.createElement("div"),r=document.createElement(e.element);return a.setAttribute("id",`details-${e.element}-${e.id}`),r.setAttribute("id",`${e.element}-${e.id}`),"textarea"===e.element&&r.setAttribute("maxlength",120),a.className="flex-content todo-details collapsible-hidden",r.className=o,r.textContent=t,a.append(r),c.subscribe("detailsUpdated",(e=>{r.textContent=e.details})),a},a=()=>{const e=e=>"flex-content todo-details collapsible-hidden"==e?"flex-content todo-details":"flex-content todo-details collapsible-hidden",o=o=>{const a=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(12),r=document.querySelector(`#details-p-${a}`);r.className=e(r.className)};return{initEvents:(a,r)=>{const n=a||"",s=r||"";(e=>{document.querySelector(`#expand_more-${e}`).addEventListener("click",o)})(n),((e,t)=>{document.querySelector(`#button-${e}`).addEventListener("click",(o=>((e,t)=>{const o=`grid-${e}`,a=document.querySelector("#display-todos");let r=a.childNodes;Array.from(r).forEach((e=>{if(e.id==o){a.removeChild(e);const o=e.id.slice(5),r=t;c.publish("removedTaskFromView",{id:o,projectID:r})}}))})(e,t)))})(n,s),((o,a)=>{document.querySelector(`#create-${o}`).addEventListener("click",(o=>((o,a)=>{const r=(o.target.className===t?o.target.parentElement.id:o.target.id).slice(7),n=`#create-${r}`,s="#details-textarea-"+r,d=`#textarea-${r}`,i=`#dateInput-${r}`,l=document.querySelector(n),u=document.querySelector(s),m=document.querySelector(d),p=document.querySelector(i);if(m.addEventListener("keydown",(e=>{l.disabled=!e.target.value})),m.value&&"flex-content todo-details"===u.className){const e=a;c.publish("updateDetails",{id:r,details:m.value,date:p.value,projetID:e})}p.disabled=!p.disabled,u.className=e(u.className)})(o,projectID)))})(n)}}};c.subscribe("addTasktoView",(r=>(r=>{const n=document.createElement("div"),c=document.createElement("div");n.setAttribute("id",`grid-${r.id}`),c.setAttribute("id",r.id),n.className="grid grid-todos",c.className="flex-content todo-item",c.append(((e,o)=>{const a=e||"",r=document.createElement("div"),n=document.createElement("button"),c=document.createElement("i"),s=document.createElement("span");return r.className="flex-content",n.className="check-button-todo",c.className=t,s.className="todo-item-text",s.innerText=a,c.innerText="check_circle_outline",n.setAttribute("id",`button-${o}`),c.setAttribute("id",`check-mark-${o}`),n.append(c),r.append(n,s),r})(r.title,r.id),((e,t)=>{const o=document.createElement("div"),a=document.createElement("input"),r=`dateInput-${e}`;return a.className="solid-bottom-border new-task-todo-input",a.setAttribute("id",r),a.setAttribute("value",t),a.setAttribute("type","date"),a.disabled=!0,o.append(a),o})(r.id,r.date),(e=>{const o=document.createElement("div");return o.className="flex-content todo-item-options",["expand_more","create"].forEach((a=>{const r=document.createElement("button"),n=document.createElement("i");r.id=`${a}-${e}`,r.className=a+" icon-button todo-item-button todo-item-option",n.className=t,n.textContent=a,r.append(n),o.append(r)})),o})(r.id)),n.append(c,o({element:"p",id:r.id,details:r.details}),o({element:"textarea",id:r.id,details:r.details})),e.append(n);const s=a(),d=r.id,i=r.projectID;s.initEvents(d,i)})(r))),c.subscribe("addMultipleTaskstoView",(e=>{const t=e.tasks||{};for(let e in t){const o=t[e].getTitle(),a=t[e].getID(),r=t[e].getDate(),n=t[e].getDetails();c.publish("addTasktoView",{title:o,id:a,date:r,details:n})}}))})(),(()=>{let e;r.projectCount()&&(e=r.getProjects()[0].getID()||""),(()=>{const t=(e,t)=>{document.querySelector(t).disabled=e},o=e=>{document.querySelector(e.input).addEventListener("keydown",(o=>{(e=>{let o=(e=>!!document.querySelector(e).value)(e.input);t(!o,e.button)})(e)}))};o({input:"#new-task-input",button:"#new-task-todo-button"}),document.querySelector("#new-task-todo-button").addEventListener("click",(e=>{document.querySelector(".modal").style.display="block"})),(()=>{const a=()=>document.querySelector("#modal-text-input").value,r=()=>{document.querySelector(".modal").style.display="none",document.querySelector("#modal-text-input").value="",document.querySelector("#new-task-input").value="",document.querySelector("#new-task-date").value="",document.querySelector("#character-count").textContent="120",t(!0,"#new-task-todo-button")};o({input:"#modal-text-input",button:"#confirm-modal"}),document.querySelector("#modal-text-input").addEventListener("keydown",(e=>{(()=>{const e=document.querySelector("#character-count"),t=120-a().length;e.textContent=t,e.style.color=t<=0?"var(--menuGold)":"var(--ultrav)"})()})),document.querySelector("#confirm-modal").addEventListener("click",(t=>(()=>{const t=document.querySelector("#new-task-input").value,o=a(),n=document.querySelector("#new-task-date").value,s=e;r(),c.publish("createTask",{title:t,details:o,date:n,projectID:s})})())),document.querySelector("#close-modal").addEventListener("click",(e=>{r()}))})()})(),c.subscribe("projectSelected",(e=>{const t=e.project;(()=>{const e=document.querySelector("#display-todos");for(;e.firstChild;)e.removeChild(e.firstChild)})();for(let e in t){const o=t[e].getTitle(),a=t[e].getDetails(),r=t[e].getID();c.publish("addTasktoView",{title:o,details:a,id:r})}})),c.subscribe("projectSelected",(t=>{e=t.id}))})(),(()=>{let e=localStorage.getItem("controllerSerial");e=JSON.parse(e);for(let o in e){const e=d(o),a=u((0,t.Project)(),e);r.addProject(a)}})(),c.subscribe("saveProject",(e=>{(e=>{const t=JSON.stringify((e=>{let t=e.getProjects(),o={};return console.log(t),t.forEach((e=>{const t=e.getID();o[t]={}})),t.forEach((e=>{const t=(e=>{const t=e.getTasksforStorage();return JSON.stringify(t)})(e),a=(e=>{const t={name:e.getName(),id:e.getID()};return JSON.stringify(t)})(e),r=e.getID();o[r]=JSON.stringify({projectInfo:a,tasks:t})})),console.log(o),o})(e))||"";localStorage.setItem("controllerSerial",t)})(r)})),c.subscribe("createNewProject",(e=>{const o=e.name||"default",a=r.createID(),n=(0,t.Project)({name:o,id:a});r.addProject(n),c.publish("addProjectToView",{name:o,id:a})})),c.subscribe("updateProjectName",(e=>{const t=e.id||"";if(t){const o=r.getProject(t);if(o){const t=e.name||"default";o.setName(t)}}})),c.subscribe("createTask",(e=>{const t=o(e),a=e.projectID||"";c.publish("addTask",{task:t,projectID:a})})),c.subscribe("updateDetails",(e=>{const t=e.projectID,o=r.getProject(t),a=e.details,n=e.date,s=e.id;o.updateDetails({id:s,details:a,date:n}),c.publish("detailsUpdated",{details:a,date:n,projectID:t})})),c.subscribe("addTask",(e=>{const t=e.task,o=e.projectID;myProjects.getProject(o).addTask(t);const a=t.getTitle(),r=t.getDetails(),n=t.getID(),s=t.getDate();c.publish("saveProject",{}),c.publish("addTasktoView",{title:a,details:r,id:n,date:s,projectID:o})})),c.subscribe("removedTaskFromView",(e=>{const t=e.id||"",o=e.projectID||"";r(o).removeTask(t),c.publish("saveProject",{})}))})()})();